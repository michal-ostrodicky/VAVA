package controllers;

import java.util.Locale;
import java.util.ResourceBundle;

import javax.naming.Context;
import javax.naming.NamingException;

import remotes.MovieManagerRemote;
import remotes.UserManagerRemote;

import com.jfoenix.controls.JFXButton;

import context.ContextLoader;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import lang.Language;

public class LoginController {
	
	
	public static final String TEXTS_PATH = "language/texts";
	
	public static final String APP_NAME = "applicationName";
	public static final String LOGIN = "login";
	public static final String USERNAME = "username";
	public static final String PASSWORD = "password";
	
	public static final String USER_MANAGER = "ejb:AATM/Logic/UserManager!remotes.UserManagerRemote";
	
	
	
    @FXML
    private Label infoLabel;

    @FXML
    private JFXButton loginButton;

    @FXML
    private PasswordField passwordField;

    @FXML
    private Label appTitleLabel;

    @FXML
    private Label loginLabel;

    @FXML
    private TextField loginField;

    @FXML
    private Label passwordLabel;
    
    
    
    @FXML
    void intialize(){
    	// Set texts from properties
    	Locale lang = Language.getInstance().getLanguage();
    	ResourceBundle bundle = ResourceBundle.getBundle(TEXTS_PATH, lang);

    	// Intialize text fields
    	appTitleLabel.setText(bundle.getString(APP_NAME));
    	loginLabel.setText(bundle.getString(USERNAME));
    	loginButton.setText(bundle.getString(LOGIN));
    	passwordLabel.setText(bundle.getString(PASSWORD));
    }


    @FXML
    void login(ActionEvent event) {
    	UserManagerRemote userManager = null;
    	try {
    		Context ctx = ContextLoader.createRemoteEjbContext();
    		userManager = (UserManagerRemote) ctx.lookup(USER_MANAGER);
		} catch (NamingException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
    	
    	
    	
    	

    }

}
